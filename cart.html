<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ—Ä–∑–∏–Ω–∞</title>
    <style>
        .cart-item { display: flex; align-items: center; margin-bottom: 10px; }
        .cart-item img { width: 100px; margin-right: 10px; }
        .cart-actions { margin-top: 20px; }
    </style>
</head>
<body>
    <h1>üõí –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h1>
    <div id="cart-container"></div>
    <p><strong>–û–±—â–∞—è —Å—É–º–º–∞: <span id="total-price">0</span> —Ä—É–±.</strong></p>

    <div class="cart-actions">
        <button onclick="sendOrder()">üõç –ó–∞–∫–∞–∑–∞—Ç—å</button>
        <button onclick="clearCart()">‚ùå –û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É</button>
        <a href="index.html"><button>üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</button></a>
    </div>

    <script>
        function loadCart() {
            let cart = JSON.parse(localStorage.getItem("cart")) || [];
            let container = document.getElementById("cart-container");
            let totalPrice = 0;
            container.innerHTML = cart.length === 0 ? "<p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞.</p>" : "";

            cart.forEach((item, index) => {
                let itemPrice = parseFloat(item.price) || 0; 
                let itemQuantity = parseInt(item.quantity) || 1; 
                let itemTotal = itemPrice * itemQuantity; 
                totalPrice += itemTotal;

                container.innerHTML += `
                    <div class="cart-item">
                        <img src="${item.frontImage}">
                        <img src="${item.backImage}">
                        <p>${item.title} - ${itemPrice} —Ä—É–±. (x${itemQuantity}) = ${itemTotal} —Ä—É–±.</p>
                        <button onclick="removeFromCart(${index})">–£–¥–∞–ª–∏—Ç—å</button>
                    </div>
                `;
            });

            document.getElementById("total-price").innerText = totalPrice.toFixed(2);
        }

        function removeFromCart(index) {
            let cart = JSON.parse(localStorage.getItem("cart")) || [];
            cart.splice(index, 1);
            localStorage.setItem("cart", JSON.stringify(cart));
            loadCart();
        }

        function clearCart() {
            localStorage.removeItem("cart");
            loadCart();
        }

        function sendOrder() {
            let cart = JSON.parse(localStorage.getItem("cart")) || [];
            if (cart.length === 0) {
                alert("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞!");
                return;
            }

            let orderDetails = "üõç –ó–∞–∫–∞–∑ –æ—Ç–∫—Ä—ã—Ç–æ–∫:\n";
            let total = 0;
            cart.forEach(item => {
                let itemPrice = parseFloat(item.price) || 0;
                let itemQuantity = parseInt(item.quantity) || 1;
                let itemTotal = itemPrice * itemQuantity;
                total += itemTotal;

                orderDetails += `üìå ${item.title}\n–¶–µ–Ω–∞: ${itemPrice} —Ä—É–±. (x${itemQuantity}) = ${itemTotal} —Ä—É–±.\n`;
                orderDetails += `üñº –§–æ—Ç–æ: ${item.frontImage}, ${item.backImage}\n\n`;
            });

            orderDetails += `üí∞ –û–±—â–∞—è —Å—É–º–º–∞: ${total.toFixed(2)} —Ä—É–±.`;

            let mailtoLink = `mailto:efimof.ig@yandex.ru?subject=–ó–∞–∫–∞–∑ –æ—Ç–∫—Ä—ã—Ç–æ–∫&body=${encodeURIComponent(orderDetails)}`;
            window.location.href = mailtoLink;

            clearCart();
            alert("–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!");
        }

        document.addEventListener("DOMContentLoaded", loadCart);
    </script>
</body>
</html>






